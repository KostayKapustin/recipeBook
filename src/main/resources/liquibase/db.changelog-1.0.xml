<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="1.0.3" author="kostya.kapustin">
        <createTable tableName="tag">

            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column name="tag_description" type="VARCHAR(150)"/>

            <column name="tag_name" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>

        </createTable>
    </changeSet>

    <changeSet id="1.0.0" author="kostya.kapustin">
    <createTable tableName="users">

        <column name="id" type="BIGINT" autoIncrement="true">
            <constraints primaryKey="true" nullable="false"/>
        </column>

        <column name="user_description" type="VARCHAR(150)">
        </column>

        <column name="login" type="VARCHAR(50)">
            <constraints nullable="false" unique="true"/>
        </column>

        <column name="user_name" type="VARCHAR(50)">
            <constraints nullable="false"/>
        </column>

        <column name="password" type="VARCHAR(100)">
            <constraints nullable="false"/>
        </column>

    </createTable>
    </changeSet>

    <changeSet id="1.0.1" author="kostya.kapustin">
        <createTable tableName="recipe">

            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="cooking_time" type="INTEGER"/>

            <column name="recipe_description" type="VARCHAR(150)"/>

            <column name="image_path" type="VARCHAR(255)"/>

            <column name="recipe_name" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>

            <column name="portions_dish" type="INTEGER"/>

            <column name="my_recipes_id" type="BIGINT">
                <constraints foreignKeyName="fksdroynswxs6qt682oaedcid5h" references="users"/>
            </column>

        </createTable>
    </changeSet>


    <changeSet id="1.0.2" author="kostya.kapustin">
        <createTable tableName="ingredient">

            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="ingredient_description" type="VARCHAR(150)"/>

            <column name="ingredient_name" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>

            <column name="ingredient_recipe_id" type="BIGINT">
                <constraints foreignKeyName="fk645tl79psg7vla0wk44n8c5ek" references="recipe"/>
            </column>

        </createTable>
    </changeSet>

    <changeSet id="1.0.4" author="kostya.kapustin">
        <createTable tableName="recipe_tags">

            <column name = "recipe_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fkm8d9e65tioqhbd8eanewapglx"
                             references="recipe"/>
            </column>

            <column name = "tags_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fkc61e34yhfyeke62qo2onb9pa8"
                             references="tag"/>
            </column>

        </createTable>
    </changeSet>

    <changeSet id="1.0.5" author="kostya.kapustin">
        <createTable tableName="recipe_likes">

            <column name = "recipe_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fkiu7ckx4lxgiegaku0nedh47pi"
                             references="recipe"/>
            </column>

            <column name = "likes_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fkowfdh1akloo7cdb64vmirwj6y"
                             references="users"/>
            </column>

        </createTable>
    </changeSet>

    <changeSet id="1.0.6" author="kostya.kapustin">
        <createTable tableName="recipe_favorites">

            <column name = "recipe_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fkaedlyk80a8smpn81qnbc0g6j2"
                             references="recipe"/>
            </column>

            <column name = "favorites_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fk8o1g5f5u33j2b7253yxkyp1xt"
                             references="users"/>
            </column>

        </createTable>
    </changeSet>

    <changeSet id="1.0.7" author="kostya.kapustin">
        <createTable tableName="recipe_description_step">

            <column name = "description_step_recipe_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fkek4x48vt5oi7pfo3ek9bjj6vv"
                             references="recipe"/>
            </column>

            <column name = "description_step" type="varchar(255)">
            </column>

        </createTable>
    </changeSet>

</databaseChangeLog>